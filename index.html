<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VieHistory - Dòng chảy Lịch sử</title>
    <meta name="description" content="Nền tảng chia sẻ và thảo luận về lịch sử Việt Nam">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/assets/icons/logo.png">

    <!-- Styles -->
    <link rel="stylesheet" href="/src/styles/variables.css">
    <link rel="stylesheet" href="/src/styles/base.css">
    <link rel="stylesheet" href="/src/styles/layout.css"> 
    <link rel="stylesheet" href="/src/styles/components.css">
    <link rel="stylesheet" href="/src/styles/auth.css">
    <link rel="stylesheet" href="/src/styles/responsive.css">
</head>

<body>
    <a href="#main-content" class="skip-link">Chuyển đến nội dung chính</a>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal hidden">
        <div class="modal-content auth-modal-content">
            <button id="auth-modal-close" class="modal-close" aria-label="Đóng">×</button>

            <div class="auth-header">
                <h2>Chào mừng đến VieHistory</h2>
                <p class="modal-message hidden">Đăng nhập để tham gia cộng đồng</p>
            </div>

            <!-- Sign In Form -->
            <form id="signin-form" class="auth-form">
                <div class="form-group">
                    <label for="signin-email">Email</label>
                    <input type="email" id="signin-email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="signin-password">Mật khẩu</label>
                    <input type="password" id="signin-password" name="password" required>
                </div>

                <button type="submit" class="auth-submit-btn">Đăng nhập</button>
            </form>

            <!-- Sign Up Form -->
            <form id="signup-form" class="auth-form hidden">
                <div class="form-group">
                    <label for="signup-name">Tên hiển thị</label>
                    <input type="text" id="signup-name" name="displayName" required>
                </div>

                <div class="form-group">
                    <label for="signup-email">Email</label>
                    <input type="email" id="signup-email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="signup-password">Mật khẩu</label>
                    <input type="password" id="signup-password" name="password" required minlength="6">
                </div>

                <div class="form-group">
                    <label for="signup-confirm">Xác nhận mật khẩu</label>
                    <input type="password" id="signup-confirm" name="confirmPassword" required minlength="6">
                </div>

                <button type="submit" class="auth-submit-btn">Tạo tài khoản</button>
            </form>

            <div class="auth-switch">
                <span id="signin-switch">Chưa có tài khoản? <a href="#" id="show-signup">Đăng ký</a></span>
                <span id="signup-switch" class="hidden">Đã có tài khoản? <a href="#" id="show-signin">Đăng
                        nhập</a></span>
            </div>
        </div>
    </div>

    <!-- Onboarding Modal -->
    <div id="onboarding-modal" class="modal">
        <div class="modal-content">
            <h2>Chào mừng đến với VieHistory</h2>
            <p>Kết nối với cộng đồng yêu lịch sử</p>
            <button class="submit-button" id="onboarding-start-btn">Bắt đầu</button>
        </div>
    </div>

    <app-sidebar></app-sidebar>

    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="navigation-tabs">
                <button class="tab-button active">Dòng thời gian</button>
                <button class="tab-button">Khám phá</button>
            </div>
            <div class="logo">VieHistory</div>
            <div class="header-actions">
                <button aria-label="Tìm kiếm">
                    <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
                        <path
                            d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                    </svg>
                </button>
                <button aria-label="Thông báo">
                    <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
                        <path
                            d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
                    </svg>
                </button>

                <!-- Auth/User Menu -->
                <button id="header-signin-btn" class="header-signin-btn">Đăng nhập</button>

                <div id="user-menu" class="user-menu hidden">
                    <button id="user-avatar-btn" class="user-avatar-btn">
                        <img id="user-avatar-img" src="" alt="" class="user-avatar-img">
                    </button>
                    <div id="user-dropdown" class="user-dropdown hidden">
                        <div class="user-info">
                            <span id="user-display-name">User</span>
                        </div>
                        <button id="signout-btn" class="dropdown-item">Đăng xuất</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Auth Required Message -->
        <div id="auth-required" class="auth-required hidden">
            <p>Đăng nhập để tham gia thảo luận và chia sẻ</p>
            <button id="feed-signin-btn" class="submit-button">Đăng nhập</button>
        </div>


        <!-- Compose Area -->
        <section class="compose-area">
            <div class="user-avatar">B</div>
            <div class="compose-input-wrapper">
                <textarea id="composeTextarea" class="compose-textarea"
                    placeholder="Chia sẻ dòng thời gian của bạn..."></textarea>

                <!-- Hashtag suggestions sẽ được tạo động -->

                <div class="compose-actions-bar">
                    <div class="compose-actions-left">
                        <!-- <div class="action-pills">
                            <button class="pill-button" data-topic="Việt Nam">Việt Nam</button>
                            <button class="pill-button" data-topic="Thế giới">Thế giới</button>
                            <button class="pill-button" data-topic="Cổ Đại">Cổ Đại</button>
                        </div> -->
                        <div class="character-counter">
                            <span class="char-count">0/2000</span>
                        </div>
                    </div>
                    <div class="compose-actions-right">
                        <button class="submit-button" id="post-submit-btn">Đăng dòng</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Feed -->
        <main class="feed-list" id="main-content" tabindex="-1">
            <div id="feedContainer">
                <!-- Dynamic content will be loaded here -->
            </div>

            <div class="empty-state">
                <svg viewBox="0 0 24 24" width="48" height="48">
                    <path
                        d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" />
                </svg>
                <h3>Chưa có bài viết nào</h3>
                <button class="submit-button" id="focus-compose-btn">Viết bài đầu tiên</button>
            </div>
        </main>

        <!-- FAB -->
        <button class="fab-compose hidden" aria-label="Soạn bài mới" id="fab-compose-btn">
            <svg viewBox="0 0 24 24">
                <path
                    d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
            </svg>
        </button>
    </div>

    <!-- Scripts -->
    <script type="module" src="/src/main.js"></script>
</body>

</html>